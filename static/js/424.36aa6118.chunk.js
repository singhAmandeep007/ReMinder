"use strict";(self.webpackChunkreminder_app=self.webpackChunkreminder_app||[]).push([[424],{9700:(e,a,r)=>{r.d(a,{x:()=>s});const s={INACTIVE:"INACTIVE",INPROGRESS:"INPROGRESS",COMPLETED:"COMPLETED",ARCHIVED:"ARCHIVED"}},9424:(e,a,r)=>{r.d(a,{Reminders:()=>O});var s=r(9458),i=r(5379),n=r(5686),l=r(5043);var t=r(9657);var d=r(4349),c=r(5617),o=r(8899),m=r(5711),u=r(2382),x=r(3961),h=r(5937),p=r(5505),v=r(4808),j=r(9700),g=r(1360),f=r(579);const N=e=>{let{children:a,className:r,...s}=e;return(0,f.jsxs)(c.$n,{variant:"ghost",className:(0,d.cn)("gap-1 border border-accent-dark hover:bg-accent-dark hover:text-primary",r),...s,children:[(0,f.jsx)(g.A,{className:"icon"}),a]})};var b=r(6210),C=r(614);const w=e=>{let{className:a,onCancel:r,onSave:s,defaultValue:i="",testIds:n}=e;const t=(0,l.useRef)(null),o=(0,l.useCallback)((()=>{var e;null!==(e=t.current)&&void 0!==e&&e.value&&(null===s||void 0===s||s(t.current.value))}),[s]),m=(0,l.useCallback)((()=>{null===r||void 0===r||r()}),[r]);return(0,f.jsxs)("div",{className:(0,d.cn)("mt-2 flex items-center justify-between",a),children:[(0,f.jsx)(c.pd,{className:"ml-1 mr-2",defaultValue:i,ref:t,autoFocus:!0,required:!0}),(0,f.jsxs)("div",{className:"flex items-center gap-1",children:[(0,f.jsx)(c.$n,{onClick:o,size:"icon",variant:"outline","data-testid":null===n||void 0===n?void 0:n.save,className:"group",children:(0,f.jsx)(b.A,{className:"icon group-hover:text-primary"})}),(0,f.jsx)(c.$n,{onClick:m,size:"icon",variant:"outline","data-testid":null===n||void 0===n?void 0:n.cancel,className:"group",children:(0,f.jsx)(C.A,{className:"icon group-hover:text-destructive"})})]})]})},k=e=>{var a;let{reminder:r,listName:s}=e;const[i,n]=(0,l.useState)(!1),[t,o]=(0,l.useState)(!1),{handleOnDelete:g,handleOnUpdate:N,isLoading:b}=(e=>{let{reminder:a}=e;const[r,s]=(0,d.Qs)(),[i,n]=(0,d.a2)();return{isLoading:s.isLoading||n.isLoading,isErrored:s.isError||n.isError,handleOnDelete:(0,l.useCallback)((async e=>{await(0,d.$F)((()=>r(e)))}),[r]),handleOnUpdate:(0,l.useCallback)((async e=>{await(0,d.$F)((()=>i({id:e.id,groupId:e.groupId,title:e.title,state:e.state,isPinned:e.isPinned,dueDate:e.dueDate})))}),[i])}})({reminder:r}),C=b,k=r.state===j.x.COMPLETED,y=r.dueDate&&new Date(r.dueDate)<new Date;return(0,f.jsxs)("div",{className:"flex flex-col py-2","data-testid":"reminder-item-".concat(r.id),children:[t&&(0,f.jsx)(w,{className:"flex-1",defaultValue:r.title,onCancel:()=>o(!1),onSave:e=>{N({id:r.id,title:e}),o(!1)},testIds:{cancel:"reminder-item-update-cancel-".concat(r.id),save:"reminder-item-update-save-".concat(r.id)}}),!t&&(0,f.jsxs)(f.Fragment,{children:[(0,f.jsxs)("div",{className:"flex items-center justify-between gap-2",children:[(0,f.jsx)(c.Sc,{checked:k,className:"peer",onClick:()=>N({id:r.id,state:k?j.x.INACTIVE:j.x.COMPLETED})}),(0,f.jsx)(c.o5,{variant:"p",affects:"withoutPMargin",className:(0,d.cn)("flex-1 overflow-x-scroll text-nowrap py-2 peer-aria-[checked=true]:text-muted-foreground peer-aria-[checked=true]:line-through"),children:r.title}),(0,f.jsxs)(c.lG,{children:[(0,f.jsxs)(c.rI,{open:i,onOpenChange:n,modal:!1,children:[(0,f.jsx)(c.ty,{asChild:!0,children:(0,f.jsx)(c.$n,{variant:"outline",size:"icon","data-testid":"reminder-item-menu-".concat(r.id),disabled:C,children:i?(0,f.jsx)(m.A,{className:"icon"}):(0,f.jsx)(u.A,{className:"icon"})})}),(0,f.jsxs)(c.SQ,{className:"min-w-min",align:"end",onInteractOutside:()=>n(!1),children:[(0,f.jsx)(c._2,{"data-testid":"reminder-item-pin-".concat(r.id),onClick:()=>N({id:r.id,isPinned:!r.isPinned}),className:(0,d.cn)("group",{"bg-primary text-secondary":r.isPinned}),disabled:k,children:(0,f.jsx)(x.A,{size:20,className:(0,d.cn)("group-hover:text-primary"),role:"button"})}),(0,f.jsx)(c.mB,{}),(0,f.jsx)(c.zM,{asChild:!0,children:(0,f.jsx)(c._2,{className:"group",disabled:k,children:(0,f.jsx)(h.A,{size:20,className:"group-hover:text-primary",role:"button"})})}),(0,f.jsx)(c.mB,{}),(0,f.jsx)(c._2,{"data-testid":"reminder-item-edit-".concat(r.id),onClick:()=>o(!0),className:"group",disabled:k,children:(0,f.jsx)(p.A,{size:20,className:"group-hover:text-primary",role:"button"})}),(0,f.jsx)(c.mB,{}),(0,f.jsx)(c._2,{"data-testid":"reminder-item-delete-".concat(r.id),onClick:()=>g(r.id),className:"group",children:(0,f.jsx)(v.A,{size:20,className:"group-hover:text-destructive",role:"button"})})]})]}),(0,f.jsxs)(c.Cf,{className:"w-max",children:[(0,f.jsxs)(c.c7,{children:[(0,f.jsx)(c.L3,{className:"text-left",children:"Schedule your reminder"}),(0,f.jsx)(c.rr,{className:"text-left",children:"Select reminder's due date and time"})]}),(0,f.jsx)(c.K7,{isLoading:b,date:r.dueDate?new Date(r.dueDate):void 0,children:e=>{let{selectedDateTime:a}=e;return(0,f.jsx)(c.HM,{asChild:!0,children:(0,f.jsx)(c.$n,{size:"full",onClick:()=>{if(a){const e=a.toISOString();N({id:r.id,dueDate:e})}},className:(0,d.cn)(b&&"cursor-not-allowed"),disabled:!a||b,children:"Save"})})}})]})]})]}),!k&&(0,f.jsxs)("div",{className:"ml-6 mr-10 flex flex-wrap gap-2",children:[!s&&(null===(a=r.group)||void 0===a?void 0:a.name)&&(0,f.jsx)(c.Ex,{variant:"default",children:r.group.name}),y&&(0,f.jsx)(c.Ex,{variant:"destructive",children:"Overdue"})]})]})]})},y=()=>{const{reminders:e,refetchReminders:a,reminderGroup:r,handleOnSave:s}=(()=>{const e=(0,d.S9)(),{currentData:a,refetch:r}=(0,d.z5)(e),{currentData:s}=(0,d.n)(e.groupId,{skip:!e.groupId}),[i,n]=(0,d.Lp)(),t=n.isLoading,c=n.isError;return{reminders:a,reminderGroup:s,refetchReminders:r,handleOnSave:(0,l.useCallback)((async e=>{await(0,d.$F)((()=>i({groupId:e.groupId,title:e.title})))}),[i]),isLoading:t,isErrored:c}})(),[i,n]=(0,l.useState)(!1);return(0,f.jsxs)("div",{className:"flex flex-1 flex-col overflow-hidden p-4",children:[(0,f.jsxs)("div",{className:"mb-2 flex items-center justify-between gap-2",children:[(0,f.jsx)(c.o5,{variant:"h4",className:"flex items-center justify-between overflow-x-scroll text-nowrap py-2 ","data-testid":"reminder-list-title",children:(null===r||void 0===r?void 0:r.name)||"All"}),(0,f.jsxs)("div",{className:"flex gap-2",children:[(0,f.jsx)(c.$n,{size:"icon",variant:"ghost",className:"hover:text-primary","data-testid":"reminder-list-refetch",children:(0,f.jsx)(o.A,{className:"icon",onClick:a})}),(0,f.jsx)(N,{size:"icon",onClick:()=>n((e=>!e)),disabled:i})]})]}),e&&(0,f.jsx)("div",{className:"flex-1 overflow-scroll",children:(0,f.jsx)("ul",{className:"divide divide-y",children:null===e||void 0===e?void 0:e.slice().sort(((e,a)=>e.isPinned?-1:a.isPinned?1:0)).map((e=>(0,f.jsx)("li",{children:(0,f.jsx)(k,{reminder:e,listName:null===r||void 0===r?void 0:r.name})},e.id)))})}),i&&(0,f.jsx)(w,{onCancel:()=>n(!1),onSave:e=>{s({title:e,groupId:null===r||void 0===r?void 0:r.id}),n(!1)},testIds:{cancel:"reminder-item-create-cancel",save:"reminder-item-create-save"}})]})},S=e=>{let{reminderGroup:a}=e;const[r,s]=(0,l.useState)(!1),[i,n]=(0,l.useState)(!1),{handleOnDelete:t,handleOnItemClick:o,handleOnSave:x,isLoading:h,isSelected:j}=(e=>{let{reminderGroup:a}=e;const{groupId:r}=(0,d.GV)(d.hk),s=r===(null===a||void 0===a?void 0:a.id),[i,n]=(0,d.dP)(),[t,c]=(0,d.FG)(),o=(0,d.jL)();return{isSelected:s,isLoading:n.isLoading||c.isLoading,isErrored:n.isError||c.isError,handleOnItemClick:(0,l.useCallback)((e=>{o((0,d.dR)(e))}),[o]),handleOnDelete:(0,l.useCallback)((async e=>{await(0,d.$F)((()=>i(e)))}),[i]),handleOnSave:(0,l.useCallback)((async e=>{await(0,d.$F)((()=>t({id:e.id,name:e.name})))}),[t])}})({reminderGroup:a}),g=h,N=(0,l.useMemo)((()=>a&&i?(0,f.jsx)(w,{className:"flex-1",defaultValue:a.name,onCancel:()=>n(!1),onSave:e=>{x({id:a.id,name:e}),n(!1)},testIds:{cancel:"reminder-group-item-update-cancel-".concat(a.id),save:"reminder-group-item-update-save-".concat(a.id)}}):(0,f.jsx)(c.o5,{variant:"p",className:(0,d.cn)("flex-1 cursor-pointer overflow-x-scroll text-nowrap py-2",j&&"text-primary"),onClick:()=>o({groupId:a?a.id:void 0}),children:a?a.name:"All"})),[j,o,i,a,x]);return(0,f.jsxs)("div",{className:(0,d.cn)("flex cursor-pointer items-center justify-between gap-2 px-1 py-2"),"data-testid":"reminder-group-item-".concat(a?a.id:"all"),children:[N,a&&!i&&(0,f.jsxs)(c.rI,{open:r,onOpenChange:s,children:[(0,f.jsx)(c.ty,{asChild:!0,children:(0,f.jsx)(c.$n,{variant:"outline",size:"icon","data-testid":"reminder-group-item-menu-".concat(a.id),disabled:g,children:r?(0,f.jsx)(m.A,{className:"icon"}):(0,f.jsx)(u.A,{className:"icon"})})}),(0,f.jsxs)(c.SQ,{align:"end",onInteractOutside:()=>s(!1),className:"min-w-min",children:[(0,f.jsx)(c._2,{onClick:()=>n(!0),"data-testid":"reminder-group-item-update-".concat(a.id),className:"group",children:(0,f.jsx)(p.A,{size:20,className:"group-hover:text-primary",role:"button"})}),(0,f.jsx)(c.mB,{}),(0,f.jsx)(c._2,{onClick:()=>t(a.id),"data-testid":"reminder-group-item-delete-".concat(a.id),className:"group",children:(0,f.jsx)(v.A,{size:20,className:"group-hover:text-destructive",role:"button"})})]})]})]})};var I=r(6328);const E=()=>{const[e,a]=(0,l.useState)(!1),{handleOnSave:r,reminderGroups:s}=(()=>{const e=(0,d.kI)(),[a,r]=(0,d.E2)(),s=r.isLoading,i=r.isError,n=(0,l.useCallback)((async e=>{await(0,d.$F)((()=>a({name:e.name})))}),[a]);return r.isError&&I.oR.error("Error creating reminder group"),e.isError&&I.oR.error("Error fetching reminder groups"),{reminderGroups:e.data,handleOnSave:n,isLoading:s,isErrored:i}})();return(0,f.jsxs)("div",{className:"flex min-w-[200px] flex-1 flex-col overflow-hidden p-4",children:[(0,f.jsx)("div",{className:"mb-2 mt-1 flex justify-center",children:(0,f.jsx)(N,{size:"full",onClick:()=>a((e=>!e)),disabled:e,children:"Add List"})}),(0,f.jsx)("div",{className:"flex-1 overflow-scroll",children:(0,f.jsxs)("ul",{className:"divide divide-y divide-accent-dark",children:[(0,f.jsx)("li",{children:(0,f.jsx)(S,{})},"all"),s&&s.map((e=>(0,f.jsx)("li",{children:(0,f.jsx)(S,{reminderGroup:e})},e.id)))]})}),e&&(0,f.jsx)(w,{onCancel:()=>a(!1),onSave:e=>{r({name:e}),a(!1)},testIds:{cancel:"reminder-group-item-create-cancel",save:"reminder-group-item-create-save"}})]})},O=()=>{const{isBelowMd:e}=function(e,a){const r=a[e],s=(0,t.Ub)({query:"(max-width: ".concat(r,")")}),i=e[0].toUpperCase()+e.substring(1);return{[e]:Number(String(r).replace(/[^0-9]/g,"")),["isAbove".concat(i)]:!s,["isBelow".concat(i)]:s}}("md",d.LO);return(0,f.jsx)("div",{className:"mx-auto h-full max-w-screen-lg p-2 md:p-8","data-testid":"reminders",children:(0,f.jsxs)("div",{className:"flex h-full flex-col rounded border-2 border-primary shadow-lg lg:h-3/4",children:[(0,f.jsx)("nav",{className:"flex h-[--navbar-height] border-b-2 border-primary",children:(0,f.jsx)("ul",{className:"flex flex-1 items-center justify-between px-4",children:(0,f.jsx)("li",{children:(0,f.jsx)(c.o5,{variant:"h2",className:"pb-0",children:"Reminders"})})})}),(0,f.jsxs)(s.YZ,{direction:e?"vertical":"horizontal",className:"flex-1",autoSaveId:"reminders-panel-group",children:[(0,f.jsx)(s.Zk,{maxSize:50,className:"flex flex-col",children:(0,f.jsx)(E,{})}),(0,f.jsx)(s.TW,{className:"group",children:(0,f.jsx)("div",{className:(0,d.cn)("flex h-full w-full items-center border-primary group-hover:bg-secondary group-hover:text-primary",e?"border-b-2":"border-r-2"),children:e?(0,f.jsx)(i.A,{className:"icon mx-auto"}):(0,f.jsx)(n.A,{className:"icon mx-auto"})})}),(0,f.jsx)(s.Zk,{className:"flex flex-col",children:(0,f.jsx)(y,{})})]})]})})}}}]);
//# sourceMappingURL=424.36aa6118.chunk.js.map