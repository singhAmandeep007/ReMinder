"use strict";(self.webpackChunktodo_app=self.webpackChunktodo_app||[]).push([[759],{4759:(e,a,s)=>{s.d(a,{Reminders:()=>A});var i=s(9458),r=s(5379),n=s(5686),t=s(5043);var l=s(9657),d=s(4349);var c=s(4743),o=s(8899),m=s(5711),u=s(2382),x=s(3961),p=s(5505),h=s(4808);const v="ACTIVE",j="COMPLETED";var g=s(1360),f=s(579);const N=e=>{let{children:a,className:s,...i}=e;return(0,f.jsxs)(c.$n,{variant:"ghost",className:(0,d.cn)("gap-1 border border-accent-dark hover:bg-accent-dark hover:text-primary",s),...i,children:[(0,f.jsx)(g.A,{className:"icon"}),a]})};var b=s(6210),k=s(614);const y=e=>{let{className:a,onCancel:s,onSave:i,defaultValue:r="",testIds:n}=e;const l=(0,t.useRef)(null),o=(0,t.useCallback)((()=>{var e;null!==(e=l.current)&&void 0!==e&&e.value&&(null===i||void 0===i||i(l.current.value))}),[i]),m=(0,t.useCallback)((()=>{null===s||void 0===s||s()}),[s]);return(0,f.jsxs)("div",{className:(0,d.cn)("mt-2 flex items-center justify-between",a),children:[(0,f.jsx)(c.pd,{className:"ml-1 mr-2",defaultValue:r,ref:l,autoFocus:!0,required:!0}),(0,f.jsxs)("div",{className:"flex items-center gap-1",children:[(0,f.jsx)(c.$n,{onClick:o,size:"icon",variant:"outline","data-testid":null===n||void 0===n?void 0:n.save,className:"group",children:(0,f.jsx)(b.A,{className:"icon group-hover:text-primary"})}),(0,f.jsx)(c.$n,{onClick:m,size:"icon",variant:"outline","data-testid":null===n||void 0===n?void 0:n.cancel,className:"group",children:(0,f.jsx)(k.A,{className:"icon group-hover:text-destructive"})})]})]})},C=e=>{let{reminder:a}=e;const[s,i]=(0,t.useState)(!1),[r,n]=(0,t.useState)(!1),{handleOnDelete:l,handleOnUpdate:o,isLoading:g}=(e=>{let{reminder:a}=e;const[s,i]=(0,d.Qs)(),[r,n]=(0,d.a2)();return{isLoading:i.isLoading||n.isLoading,isErrored:i.isError||n.isError,handleOnDelete:(0,t.useCallback)((async e=>{await(0,d.$F)((()=>s(e)))}),[s]),handleOnUpdate:(0,t.useCallback)((async e=>{await(0,d.$F)((()=>r({id:e.id,groupId:e.groupId,title:e.title,state:e.state,isPinned:e.isPinned})))}),[r])}})({reminder:a}),N=g;return(0,f.jsxs)("div",{className:"flex items-center justify-between gap-2  py-2","data-testid":"reminder-item-".concat(a.id),children:[r?(0,f.jsx)(y,{className:"flex-1",defaultValue:a.title,onCancel:()=>n(!1),onSave:e=>{o({id:a.id,title:e}),n(!1)},testIds:{cancel:"reminder-item-update-cancel-".concat(a.id),save:"reminder-item-update-save-".concat(a.id)}}):(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(c.Sc,{checked:a.state===j,className:"peer",onClick:()=>o({id:a.id,state:a.state===j?v:j})}),(0,f.jsx)(c.o5,{variant:"p",affects:"withoutPMargin",className:(0,d.cn)("flex-1 overflow-x-scroll text-nowrap py-2 peer-aria-[checked=true]:line-through"),children:a.title})]}),!r&&(0,f.jsxs)(c.rI,{open:s,onOpenChange:i,children:[(0,f.jsx)(c.ty,{asChild:!0,children:(0,f.jsx)(c.$n,{variant:"outline",size:"icon","data-testid":"reminder-item-menu-".concat(a.id),disabled:N,children:s?(0,f.jsx)(m.A,{className:"icon"}):(0,f.jsx)(u.A,{className:"icon"})})}),(0,f.jsxs)(c.SQ,{className:"min-w-min",align:"end",onInteractOutside:()=>i(!1),children:[(0,f.jsx)(c._2,{"data-testid":"reminder-item-pin-".concat(a.id),onClick:()=>o({id:a.id,isPinned:!a.isPinned}),className:(0,d.cn)("group",{"bg-primary text-secondary":a.isPinned}),children:(0,f.jsx)(x.A,{size:20,className:(0,d.cn)("group-hover:text-primary"),role:"button"})}),(0,f.jsx)(c.mB,{}),(0,f.jsx)(c._2,{"data-testid":"reminder-item-edit-".concat(a.id),onClick:()=>n(!0),className:"group",disabled:a.state===j,children:(0,f.jsx)(p.A,{size:20,className:"group-hover:text-primary",role:"button"})}),(0,f.jsx)(c.mB,{}),(0,f.jsx)(c._2,{"data-testid":"reminder-item-delete-".concat(a.id),onClick:()=>l(a.id),className:"group",children:(0,f.jsx)(h.A,{size:20,className:"group-hover:text-destructive",role:"button"})})]})]})]})},w=()=>{const{reminders:e,refetchReminders:a,reminderGroup:s,handleOnSave:i}=(()=>{const e=(0,d.S9)(),{currentData:a,refetch:s}=(0,d.z5)(e),{currentData:i}=(0,d.n)(e.groupId,{skip:!e.groupId}),[r,n]=(0,d.Lp)(),l=n.isLoading,c=n.isError;return{reminders:a,reminderGroup:i,refetchReminders:s,handleOnSave:(0,t.useCallback)((async e=>{await(0,d.$F)((()=>r({groupId:e.groupId,title:e.title})))}),[r]),isLoading:l,isErrored:c}})(),[r,n]=(0,t.useState)(!1);return(0,f.jsxs)("div",{className:"flex flex-1 flex-col overflow-hidden p-4",children:[(0,f.jsxs)("div",{className:"mb-2 flex items-center justify-between gap-2",children:[(0,f.jsx)(c.o5,{variant:"h4",className:"flex items-center justify-between overflow-x-scroll text-nowrap py-2 ","data-testid":"reminder-list-title",children:(null===s||void 0===s?void 0:s.name)||"All"}),(0,f.jsxs)("div",{className:"flex gap-2",children:[(0,f.jsx)(c.$n,{size:"icon",variant:"ghost",className:"hover:text-primary","data-testid":"reminder-list-refetch",children:(0,f.jsx)(o.A,{className:"icon",onClick:a})}),(0,f.jsx)(N,{size:"icon",onClick:()=>n((e=>!e)),disabled:r})]})]}),e&&(0,f.jsx)("div",{className:"flex-1 overflow-scroll",children:(0,f.jsx)("ul",{className:"divide divide-y",children:null===e||void 0===e?void 0:e.slice().sort(((e,a)=>e.isPinned?-1:a.isPinned?1:0)).map((e=>(0,f.jsx)("li",{children:(0,f.jsx)(C,{reminder:e})},e.id)))})}),r&&(0,f.jsx)(y,{onCancel:()=>n(!1),onSave:e=>{i({title:e,groupId:null===s||void 0===s?void 0:s.id}),n(!1)},testIds:{cancel:"reminder-item-create-cancel",save:"reminder-item-create-save"}})]})},S=e=>{let{reminderGroup:a}=e;const[s,i]=(0,t.useState)(!1),[r,n]=(0,t.useState)(!1),{handleOnDelete:l,handleOnItemClick:o,handleOnSave:x,isLoading:v,isSelected:j}=(e=>{let{reminderGroup:a}=e;const{groupId:s}=(0,d.GV)(d.hk),i=s===(null===a||void 0===a?void 0:a.id),[r,n]=(0,d.dP)(),[l,c]=(0,d.FG)(),o=(0,d.jL)();return{isSelected:i,isLoading:n.isLoading||c.isLoading,isErrored:n.isError||c.isError,handleOnItemClick:(0,t.useCallback)((e=>{o((0,d.dR)(e))}),[o]),handleOnDelete:(0,t.useCallback)((async e=>{await(0,d.$F)((()=>r(e)))}),[r]),handleOnSave:(0,t.useCallback)((async e=>{await(0,d.$F)((()=>l({id:e.id,name:e.name})))}),[l])}})({reminderGroup:a}),g=v,N=(0,t.useMemo)((()=>a&&r?(0,f.jsx)(y,{className:"flex-1",defaultValue:a.name,onCancel:()=>n(!1),onSave:e=>{x({id:a.id,name:e}),n(!1)},testIds:{cancel:"reminder-group-item-update-cancel-".concat(a.id),save:"reminder-group-item-update-save-".concat(a.id)}}):(0,f.jsx)(c.o5,{variant:"p",className:(0,d.cn)("flex-1 cursor-pointer overflow-x-scroll text-nowrap py-2",j&&"text-primary"),onClick:()=>o({groupId:a?a.id:void 0}),children:a?a.name:"All"})),[j,o,r,a,x]);return(0,f.jsxs)("div",{className:(0,d.cn)("flex cursor-pointer items-center justify-between gap-2 px-1 py-2"),"data-testid":"reminder-group-item-".concat(a?a.id:"all"),children:[N,a&&!r&&(0,f.jsxs)(c.rI,{open:s,onOpenChange:i,children:[(0,f.jsx)(c.ty,{asChild:!0,children:(0,f.jsx)(c.$n,{variant:"outline",size:"icon","data-testid":"reminder-group-item-menu-".concat(a.id),disabled:g,children:s?(0,f.jsx)(m.A,{className:"icon"}):(0,f.jsx)(u.A,{className:"icon"})})}),(0,f.jsxs)(c.SQ,{align:"end",onInteractOutside:()=>i(!1),className:"min-w-min",children:[(0,f.jsx)(c._2,{onClick:()=>n(!0),"data-testid":"reminder-group-item-update-".concat(a.id),className:"group",children:(0,f.jsx)(p.A,{size:20,className:"group-hover:text-primary",role:"button"})}),(0,f.jsx)(c.mB,{}),(0,f.jsx)(c._2,{onClick:()=>l(a.id),"data-testid":"reminder-group-item-delete-".concat(a.id),className:"group",children:(0,f.jsx)(h.A,{size:20,className:"group-hover:text-destructive",role:"button"})})]})]})]})},I=()=>{const[e,a]=(0,t.useState)(!1),{handleOnSave:s,reminderGroups:i}=(()=>{const{data:e}=(0,d.kI)(),[a,s]=(0,d.E2)(),i=s.isLoading,r=s.isError;return{reminderGroups:e,handleOnSave:(0,t.useCallback)((async e=>{await(0,d.$F)((()=>a({name:e.name})))}),[a]),isLoading:i,isErrored:r}})();return(0,f.jsxs)("div",{className:"flex min-w-[200px] flex-1 flex-col overflow-hidden p-4",children:[(0,f.jsx)("div",{className:"mb-2 mt-1 flex justify-center",children:(0,f.jsx)(N,{size:"full",onClick:()=>a((e=>!e)),disabled:e,children:"Add List"})}),(0,f.jsx)("div",{className:"flex-1 overflow-scroll",children:(0,f.jsxs)("ul",{className:"divide divide-y divide-accent-dark",children:[(0,f.jsx)("li",{children:(0,f.jsx)(S,{})},"all"),i&&i.map((e=>(0,f.jsx)("li",{children:(0,f.jsx)(S,{reminderGroup:e})},e.id)))]})}),e&&(0,f.jsx)(y,{onCancel:()=>a(!1),onSave:e=>{s({name:e}),a(!1)},testIds:{cancel:"reminder-group-item-create-cancel",save:"reminder-group-item-create-save"}})]})},A=()=>{const{isBelowMd:e}=function(e){const a=d.LO[e],s=(0,l.Ub)({query:"(max-width: ".concat(a,")")}),i=e[0].toUpperCase()+e.substring(1);return{[e]:Number(String(a).replace(/[^0-9]/g,"")),["isAbove".concat(i)]:!s,["isBelow".concat(i)]:s}}("md");return(0,f.jsx)("div",{className:"mx-auto h-full max-w-screen-md p-2 md:p-8",children:(0,f.jsxs)("div",{className:"flex h-full flex-col rounded border-2 border-primary shadow-lg lg:h-3/4",children:[(0,f.jsx)("nav",{className:"flex h-[--navbar-height] border-b-2 border-primary",children:(0,f.jsx)("ul",{className:"flex flex-1 items-center justify-between px-4",children:(0,f.jsx)("li",{children:(0,f.jsx)(c.o5,{variant:"h2",className:"pb-0",children:"Reminders"})})})}),(0,f.jsxs)(i.YZ,{direction:e?"vertical":"horizontal",className:"flex-1",autoSaveId:"reminders-panel-group",children:[(0,f.jsx)(i.Zk,{maxSize:50,className:"flex flex-col",children:(0,f.jsx)(I,{})}),(0,f.jsx)(i.TW,{className:"group",children:(0,f.jsx)("div",{className:(0,d.cn)("flex h-full w-full items-center border-primary group-hover:bg-secondary group-hover:text-primary",e?"border-b-2":"border-r-2"),children:e?(0,f.jsx)(r.A,{className:"icon mx-auto"}):(0,f.jsx)(n.A,{className:"icon mx-auto"})})}),(0,f.jsx)(i.Zk,{className:"flex flex-col",children:(0,f.jsx)(w,{})})]})]})})}}}]);
//# sourceMappingURL=759.bf9ec066.chunk.js.map