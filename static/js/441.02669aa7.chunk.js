"use strict";(self.webpackChunkreminder_app=self.webpackChunkreminder_app||[]).push([[441],{8441:(e,r,t)=>{t.d(r,{runServer:()=>h});var n=t(3806),s=t(1556);var i=t(8814),a=t(153),d=t(126);const o=e=>{let{db:r}=e;return[i.L.get((0,d.Iw)("/reminders"),(e=>{let{request:t}=e;const n=r.reminder.getAll(),s=(0,d.wm)(t.url);let i=n;return s.groupId&&(i=i.filter((e=>{var r;return(null===e||void 0===e||null===(r=e.group)||void 0===r?void 0:r.id)===s.groupId}))),s.state&&(i=i.filter((e=>e.state===s.state))),a.c.json({data:i},{status:200})})),i.L.post((0,d.Iw)("/reminders"),(async e=>{let{request:t}=e;const{title:n,groupId:s}=await t.json(),i=r.reminderGroup.getAll().find((e=>e.id===s));if(s&&!i)return a.c.json({message:"Reminder Group with id ".concat(s," not found!")},{status:404});const d=r.reminder.create({title:n,group:i});return a.c.json({data:d},{status:201})})),i.L.delete((0,d.Iw)("/reminders/:id"),(e=>{let{params:t}=e;return r.reminder.findFirst({where:{id:{equals:t.id}}})?(r.reminder.delete({where:{id:{equals:t.id}}}),a.c.json({message:"Reminder with id ".concat(t.id," deleted!")},{status:200})):a.c.json({message:"Reminder with id ".concat(t.id," not found!")},{status:404})})),i.L.patch((0,d.Iw)("/reminders/:id"),(async e=>{let{request:t,params:n}=e;const{groupId:s,...i}=await t.json();if(!r.reminder.findFirst({where:{id:{equals:n.id}}}))return a.c.json({message:"Reminder with id ".concat(n.id," not found!")},{status:404});const d=r.reminderGroup.findFirst({where:{id:{equals:s}}});if(s&&!d)return a.c.json({message:"Reminder Group with id ".concat(s," not found!")},{status:404});const o=r.reminder.update({where:{id:{equals:n.id}},data:{...i}});return a.c.json({data:o},{status:200})}))]},u=e=>{let{db:r}=e;return[i.L.get((0,d.Iw)("/reminder-groups"),(()=>a.c.json({data:r.reminderGroup.getAll()},{status:200}))),i.L.get((0,d.Iw)("/reminder-groups/:id"),(e=>{let{params:t}=e;const n=r.reminderGroup.findFirst({where:{id:{equals:t.id}}});return n?a.c.json({data:n},{status:200}):a.c.json({message:"Reminder Group with id ".concat(t.id," not found!")},{status:404})})),i.L.post((0,d.Iw)("/reminder-groups"),(async e=>{let{request:t}=e;const n=await t.json(),s=r.reminderGroup.create({...n});return a.c.json({data:s},{status:201})})),i.L.delete((0,d.Iw)("/reminder-groups/:id"),(e=>{let{params:t}=e;return r.reminderGroup.findFirst({where:{id:{equals:t.id}}})?(r.reminderGroup.delete({where:{id:{equals:t.id}}}),a.c.json({message:"Reminder Group with id ".concat(t.id," deleted!")},{status:200})):a.c.json({message:"Reminder Group with id ".concat(t.id," not found!")},{status:404})})),i.L.patch((0,d.Iw)("/reminder-groups/:id"),(async e=>{let{request:t,params:n}=e;const s=await t.json();if(!r.reminderGroup.findFirst({where:{id:{equals:n.id}}}))return a.c.json({message:"Reminder Group with id ".concat(n.id," not found!")},{status:404});const i=r.reminderGroup.update({where:{id:{equals:n.id}},data:{...s}});return a.c.json({data:i},{status:200})}))]};var c=t(3527),l=t(9700);const m=(0,c.factory)({reminder:{id:(0,c.primaryKey)(d.uR),title:()=>"Reminder ".concat((0,d.uR)({simple:!0})),isPinned:()=>!1,state:()=>l.x.INACTIVE,group:(0,c.nullable)((0,c.oneOf)("reminderGroup")),createdAt:()=>(new Date).toISOString(),updatedAt:()=>(new Date).toISOString(),focusSessions:()=>[],currentFocusSession:(0,c.nullable)({startTime:()=>String,endTime:()=>String},{defaultsToNull:!0}),dueDate:(0,c.nullable)((()=>null)),repeatInterval:(0,c.nullable)((()=>null)),repeatTimes:(0,c.nullable)((()=>null))},reminderGroup:{id:(0,c.primaryKey)(d.uR),name:()=>"Reminder Group ".concat((0,d.uR)({simple:!0})),createdAt:()=>(new Date).toISOString(),updatedAt:()=>(new Date).toISOString()}}),p=[...u(w={db:m}),...o(w)];var w;const h=async e=>(null!==e&&void 0!==e&&e.withDefaultScenario&&(e=>{const r={withReminders:function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10;for(let r=0;r<t;r++)e.reminder.create();return r},withReminderGroups:t=>{let{reminderGroups:n=["Work","Home","Personal"],remindersPerGroup:s=10}=t;return n.forEach((r=>{const t=e.reminderGroup.create({name:r});for(let n=0;n<s;n++)e.reminder.create({group:t})})),r},withFocusSessions:()=>(e.reminder.getAll().forEach((r=>{const t=Math.floor(11*Math.random())+0,n=(0,s.Q)(t);e.reminder.update({where:{id:{equals:r.id}},data:{...r,focusSessions:n}})})),r)};return r})(m).withReminders(5).withReminderGroups({reminderGroups:["Work","Home","Personal"],remindersPerGroup:2}).withFocusSessions(),await(async()=>{const e=(0,n.k)(...p);return await e.start({onUnhandledRequest:"bypass",serviceWorker:{url:"".concat("https://singhamandeep.me/reminder-app/","mockServiceWorker.js")}})})())},1556:(e,r,t)=>{t.d(r,{Q:()=>a});var n=t(8007),s=t(6632),i=t(126);function a(e){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:30;const t=new Date,a=[],d=(0,i.ML)(e,1,r);for(let i=0;i<e;i++){const e=(0,n.e)(t,d[i]),r=Math.floor(121*Math.random()),o=(0,s.z)(e,r),u=o>t?t:o,c={startTime:e.toISOString(),endTime:u.toISOString()};a.push(c)}return a.sort(((e,r)=>new Date(e.startTime).getTime()-new Date(r.startTime).getTime()))}},9700:(e,r,t)=>{t.d(r,{x:()=>n});const n={INACTIVE:"INACTIVE",INPROGRESS:"INPROGRESS",COMPLETED:"COMPLETED",ARCHIVED:"ARCHIVED"}}}]);
//# sourceMappingURL=441.02669aa7.chunk.js.map