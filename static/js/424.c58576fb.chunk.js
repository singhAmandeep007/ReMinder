"use strict";(self.webpackChunkreminder_app=self.webpackChunkreminder_app||[]).push([[424],{9700:(e,r,a)=>{a.d(r,{x:()=>i});const i={INACTIVE:"INACTIVE",INPROGRESS:"INPROGRESS",COMPLETED:"COMPLETED",ARCHIVED:"ARCHIVED"}},9424:(e,r,a)=>{a.d(r,{Reminders:()=>O});var i=a(9458),s=a(5379),t=a(5686),n=a(5043);var d=a(9657);var l=a(4349),c=a(8899),o=a(2218),m=a(5711),u=a(2382),x=a(3961),h=a(5937),p=a(5505),v=a(4808),j=a(6193),g=a(9700),f=a(1360),N=a(579);const b=e=>{let{children:r,className:a,...i}=e;return(0,N.jsxs)(o.$n,{variant:"ghost",className:(0,l.cn)("gap-1 border border-accent-dark hover:bg-accent-dark hover:text-primary",a),...i,children:[(0,N.jsx)(f.A,{className:"icon"}),r]})};var C=a(6210),k=a(614);const w=e=>{let{className:r,onCancel:a,onSave:i,defaultValue:s="",testIds:t}=e;const d=(0,n.useRef)(null),c=(0,n.useCallback)((()=>{var e;null!==(e=d.current)&&void 0!==e&&e.value&&(null===i||void 0===i||i(d.current.value))}),[i]),m=(0,n.useCallback)((()=>{null===a||void 0===a||a()}),[a]);return(0,N.jsxs)("div",{className:(0,l.cn)("mt-2 flex items-center justify-between",r),children:[(0,N.jsx)(o.pd,{className:"ml-1 mr-2",defaultValue:s,ref:d,autoFocus:!0,required:!0,"data-testid":null===t||void 0===t?void 0:t.text}),(0,N.jsxs)("div",{className:"flex items-center gap-1",children:[(0,N.jsx)(o.$n,{onClick:c,size:"icon",variant:"outline","data-testid":null===t||void 0===t?void 0:t.save,className:"group",children:(0,N.jsx)(C.A,{className:"icon group-hover:text-primary"})}),(0,N.jsx)(o.$n,{onClick:m,size:"icon",variant:"outline","data-testid":null===t||void 0===t?void 0:t.cancel,className:"group",children:(0,N.jsx)(k.A,{className:"icon group-hover:text-destructive"})})]})]})},y=e=>{var r;let{reminder:a,listName:i}=e;const[s,t]=(0,n.useState)(!1),[d,c]=(0,n.useState)(!1),{handleOnDelete:f,handleOnUpdate:b,isLoading:C}=(e=>{let{reminder:r}=e;const[a,i]=(0,l.Qs)(),[s,t]=(0,l.a2)();return{isLoading:i.isLoading||t.isLoading,isErrored:i.isError||t.isError,handleOnDelete:(0,n.useCallback)((async e=>{await(0,l.$F)((()=>a(e)))}),[a]),handleOnUpdate:(0,n.useCallback)((async e=>{await(0,l.$F)((()=>s({id:e.id,groupId:e.groupId,title:e.title,state:e.state,isPinned:e.isPinned,dueDate:e.dueDate})))}),[s])}})({reminder:a}),k=C,y=a.state===g.x.COMPLETED,S=a.dueDate&&new Date(a.dueDate)<new Date;return(0,N.jsxs)("div",{className:"flex flex-col py-2","data-testid":"reminder-item-".concat(a.title),children:[d&&(0,N.jsx)(w,{className:"flex-1",defaultValue:a.title,onCancel:()=>c(!1),onSave:e=>{b({id:a.id,title:e}),c(!1)},testIds:{cancel:"reminder-update-cancel",save:"reminder-update-save",text:"reminder-update-text"}}),!d&&(0,N.jsxs)(N.Fragment,{children:[(0,N.jsxs)("div",{className:"flex items-center justify-between gap-2",children:[(0,N.jsx)(o.Sc,{checked:y,className:"peer",onClick:()=>b({id:a.id,state:y?g.x.INACTIVE:g.x.COMPLETED}),"data-testid":"reminder-item-checkbox"}),(0,N.jsx)(o.o5,{variant:"p",affects:"withoutPMargin",className:(0,l.cn)("flex-1 overflow-x-scroll text-nowrap py-2 peer-aria-[checked=true]:text-muted-foreground peer-aria-[checked=true]:line-through"),children:a.title}),(0,N.jsxs)(o.lG,{children:[(0,N.jsxs)(o.rI,{open:s,onOpenChange:t,modal:!1,children:[(0,N.jsx)(o.ty,{asChild:!0,children:(0,N.jsx)(o.$n,{variant:"outline",size:"icon","data-testid":"reminder-item-menu-btn",disabled:k,children:s?(0,N.jsx)(m.A,{className:"icon"}):(0,N.jsx)(u.A,{className:"icon"})})}),(0,N.jsxs)(o.SQ,{className:"min-w-min",align:"end",onInteractOutside:()=>t(!1),"data-testid":"reminder-item-menu",children:[(0,N.jsx)(o._2,{"data-testid":"reminder-item-menuitem-pin",onClick:()=>b({id:a.id,isPinned:!a.isPinned}),className:(0,l.cn)("group",{"bg-primary text-secondary":a.isPinned}),disabled:y,children:(0,N.jsx)(x.A,{size:20,className:(0,l.cn)("group-hover:text-primary"),role:"button"})}),(0,N.jsx)(o.mB,{}),(0,N.jsx)(o.zM,{asChild:!0,children:(0,N.jsx)(o._2,{className:"group",disabled:y,"data-testid":"reminder-item-menuitem-due-date",children:(0,N.jsx)(h.A,{size:20,className:"group-hover:text-primary",role:"button"})})}),(0,N.jsx)(o.mB,{}),(0,N.jsx)(o._2,{"data-testid":"reminder-item-menuitem-edit",onClick:()=>c(!0),className:"group",disabled:y,children:(0,N.jsx)(p.A,{size:20,className:"group-hover:text-primary",role:"button"})}),(0,N.jsx)(o.mB,{}),(0,N.jsx)(o._2,{"data-testid":"reminder-item-menuitem-delete",onClick:()=>f(a.id),className:"group",children:(0,N.jsx)(v.A,{size:20,className:"group-hover:text-destructive",role:"button"})})]})]}),(0,N.jsxs)(o.Cf,{className:"w-max","data-testid":"reminder-item-due-date-dialog",children:[(0,N.jsxs)(o.c7,{children:[(0,N.jsx)(o.L3,{className:"text-left",children:"Schedule your reminder"}),(0,N.jsx)(o.rr,{className:"text-left",children:"Select reminder's due date and time"})]}),(0,N.jsx)(o.K7,{isLoading:C,date:a.dueDate?new Date(a.dueDate):void 0,children:e=>{let{selectedDateTime:r}=e;return(0,N.jsx)(o.HM,{asChild:!0,children:(0,N.jsx)(o.$n,{size:"full",onClick:()=>{if(r){const e=r.toISOString();b({id:a.id,dueDate:e})}},className:(0,l.cn)(C&&"cursor-not-allowed"),disabled:!r||C,"data-testid":"reminder-item-save-due-date-btn",children:"Save"})})}})]})]})]}),!y&&(0,N.jsxs)("div",{className:"ml-6 mr-10 flex flex-wrap gap-2",children:[!i&&(null===(r=a.group)||void 0===r?void 0:r.name)&&(0,N.jsx)(o.Ex,{variant:"default",children:a.group.name}),(null===a||void 0===a?void 0:a.dueDate)&&(0,N.jsxs)(o.Ex,{variant:S?"destructive":"default",children:["Due: ",(0,j.GP)(new Date(a.dueDate),"PPp")]})]})]})]})};var S=a(6328);const E=()=>{const{reminders:e,refetchReminders:r,reminderGroup:a,handleOnSave:i}=(()=>{const e=(0,l.S9)(),r=(0,l.z5)(e),a=(0,l.n)(e.groupId,{skip:!e.groupId}),[i,s]=(0,l.Lp)(),t=(0,n.useCallback)((async e=>{await(0,l.$F)((()=>i({groupId:e.groupId,title:e.title})))}),[i]);return a.isError&&S.oR.error("Error fetching reminder group"),r.isError&&S.oR.error("Error fetching reminders"),s.isError&&S.oR.error("Error creating reminder"),{reminders:r.currentData,reminderGroup:a.currentData,refetchReminders:r.refetch,handleOnSave:t}})(),[s,t]=(0,n.useState)(!1);return(0,N.jsxs)("div",{className:"flex flex-1 flex-col overflow-hidden p-4",children:[(0,N.jsxs)("div",{className:"mb-2 flex items-center justify-between gap-2",children:[(0,N.jsx)(o.o5,{variant:"h4",className:"flex items-center justify-between overflow-x-scroll text-nowrap py-2 ","data-testid":"reminder-list-title",children:(null===a||void 0===a?void 0:a.name)||"All"}),(0,N.jsxs)("div",{className:"flex gap-2",children:[(0,N.jsx)(o.$n,{size:"icon",variant:"ghost",className:"hover:text-primary","data-testid":"reminder-refetch-btn",children:(0,N.jsx)(c.A,{className:"icon",onClick:r})}),(0,N.jsx)(b,{size:"icon",onClick:()=>t((e=>!e)),disabled:s,"data-testid":"reminder-create-btn"})]})]}),e&&(0,N.jsx)("div",{className:"flex-1 overflow-scroll",children:(0,N.jsx)("ul",{className:"divide divide-y",children:null===e||void 0===e?void 0:e.slice().sort(((e,r)=>e.isPinned?-1:r.isPinned?1:0)).map((e=>(0,N.jsx)("li",{children:(0,N.jsx)(y,{reminder:e,listName:null===a||void 0===a?void 0:a.name})},e.id)))})}),s&&(0,N.jsx)(w,{onCancel:()=>t(!1),onSave:e=>{i({title:e,groupId:null===a||void 0===a?void 0:a.id}),t(!1)},testIds:{cancel:"reminder-item-create-cancel",save:"reminder-item-create-save",text:"reminder-item-create-text"}})]})},I=e=>{let{reminderGroup:r}=e;const[a,i]=(0,n.useState)(!1),[s,t]=(0,n.useState)(!1),{handleOnDelete:d,handleOnItemClick:c,handleOnSave:x,isLoading:h,isSelected:j}=(e=>{let{reminderGroup:r}=e;const{groupId:a}=(0,l.GV)(l.hk),i=a===(null===r||void 0===r?void 0:r.id),[s,t]=(0,l.dP)(),[d,c]=(0,l.FG)(),o=(0,l.jL)();return{isSelected:i,isLoading:t.isLoading||c.isLoading,isErrored:t.isError||c.isError,handleOnItemClick:(0,n.useCallback)((e=>{o((0,l.dR)(e))}),[o]),handleOnDelete:(0,n.useCallback)((async e=>{await(0,l.$F)((()=>s(e)))}),[s]),handleOnSave:(0,n.useCallback)((async e=>{await(0,l.$F)((()=>d({id:e.id,name:e.name})))}),[d])}})({reminderGroup:r}),g=h,f=(0,n.useMemo)((()=>r&&s?(0,N.jsx)(w,{className:"flex-1",defaultValue:r.name,onCancel:()=>t(!1),onSave:e=>{x({id:r.id,name:e}),t(!1)},testIds:{cancel:"reminder-group-item-update-cancel-".concat(r.id),save:"reminder-group-item-update-save-".concat(r.id)}}):(0,N.jsx)(o.o5,{variant:"p",className:(0,l.cn)("flex-1 cursor-pointer overflow-x-scroll text-nowrap py-2",j&&"text-primary"),onClick:()=>c({groupId:r?r.id:void 0}),children:r?r.name:"All"})),[j,c,s,r,x]);return(0,N.jsxs)("div",{className:(0,l.cn)("flex cursor-pointer items-center justify-between gap-2 px-1 py-2"),"data-testid":"reminder-group-item-".concat(r?r.name:"all"),children:[f,r&&!s&&(0,N.jsxs)(o.rI,{open:a,onOpenChange:i,children:[(0,N.jsx)(o.ty,{asChild:!0,children:(0,N.jsx)(o.$n,{variant:"outline",size:"icon","data-testid":"reminder-group-item-menu-btn",disabled:g,children:a?(0,N.jsx)(m.A,{className:"icon"}):(0,N.jsx)(u.A,{className:"icon"})})}),(0,N.jsxs)(o.SQ,{align:"end",onInteractOutside:()=>i(!1),className:"min-w-min","data-testid":"reminder-group-item-menu",children:[(0,N.jsx)(o._2,{onClick:()=>t(!0),"data-testid":"reminder-group-item-update-".concat(r.name),className:"group",children:(0,N.jsx)(p.A,{size:20,className:"group-hover:text-primary",role:"button"})}),(0,N.jsx)(o.mB,{}),(0,N.jsx)(o._2,{onClick:()=>d(r.id),"data-testid":"reminder-group-item-delete-".concat(r.name),className:"group",children:(0,N.jsx)(v.A,{size:20,className:"group-hover:text-destructive",role:"button"})})]})]})]})},D=()=>{const[e,r]=(0,n.useState)(!1),{handleOnSave:a,reminderGroups:i}=(()=>{const e=(0,l.kI)(),[r,a]=(0,l.E2)(),i=(0,n.useCallback)((async e=>{await(0,l.$F)((()=>r({name:e.name})))}),[r]);return a.isError&&S.oR.error("Error creating reminder group"),e.isError&&S.oR.error("Error fetching reminder groups"),{reminderGroups:e.data,handleOnSave:i}})();return(0,N.jsxs)("div",{className:"flex min-w-[200px] flex-1 flex-col overflow-hidden p-4",children:[(0,N.jsx)("div",{className:"mb-2 mt-1 flex justify-center",children:(0,N.jsx)(b,{size:"full",onClick:()=>r((e=>!e)),disabled:e,"data-testid":"reminder-group-create-btn",children:"Add List"})}),(0,N.jsx)("div",{className:"flex-1 overflow-scroll",children:(0,N.jsxs)("ul",{className:"divide divide-y divide-accent-dark",children:[(0,N.jsx)("li",{children:(0,N.jsx)(I,{})},"all"),i&&i.map((e=>(0,N.jsx)("li",{children:(0,N.jsx)(I,{reminderGroup:e})},e.id)))]})}),e&&(0,N.jsx)(w,{onCancel:()=>r(!1),onSave:e=>{a({name:e}),r(!1)},testIds:{cancel:"reminder-group-create-cancel",save:"reminder-group-create-save",text:"reminder-group-create-text"}})]})},O=()=>{const{isBelowMd:e}=function(e,r){const a=r[e],i=(0,d.Ub)({query:"(max-width: ".concat(a,")")}),s=e[0].toUpperCase()+e.substring(1);return{[e]:Number(String(a).replace(/[^0-9]/g,"")),["isAbove".concat(s)]:!i,["isBelow".concat(s)]:i}}("md",l.LO);return(0,N.jsx)("div",{className:"mx-auto h-full max-w-screen-lg p-2 md:p-8","data-testid":"reminders",children:(0,N.jsx)("div",{className:"flex h-full flex-col rounded border-2 border-primary shadow-lg lg:h-3/4",children:(0,N.jsxs)(i.YZ,{direction:e?"vertical":"horizontal",className:"flex-1",autoSaveId:"reminders-panel-group",children:[(0,N.jsx)(i.Zk,{maxSize:50,className:"flex flex-col",children:(0,N.jsx)(D,{})}),(0,N.jsx)(i.TW,{className:"group",children:(0,N.jsx)("div",{className:(0,l.cn)("flex h-full w-full items-center border-primary group-hover:bg-secondary group-hover:text-primary",e?"border-b-2":"border-r-2"),children:e?(0,N.jsx)(s.A,{className:"icon mx-auto"}):(0,N.jsx)(t.A,{className:"icon mx-auto"})})}),(0,N.jsx)(i.Zk,{className:"flex flex-col",children:(0,N.jsx)(E,{})})]})})})}}}]);
//# sourceMappingURL=424.c58576fb.chunk.js.map