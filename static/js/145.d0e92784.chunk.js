"use strict";(self.webpackChunktodo_app=self.webpackChunktodo_app||[]).push([[145],{9145:(e,a,i)=>{i.d(a,{Reminders:()=>A});var s=i(9458),r=i(5379),t=i(5686),n=i(788),l=i(4349),d=i(8957),c=i(5043),o=i(8899),m=i(5505),x=i(4808),u=i(5711),p=i(2382),h=i(579);var v=i(1360);const j=e=>{let{children:a,className:i,...s}=e;return(0,h.jsxs)(d.$n,{variant:"ghost",className:(0,l.cn)("gap-1 border border-accent-dark hover:bg-accent-dark hover:text-primary",i),...s,children:[(0,h.jsx)(v.A,{className:"icon"}),a]})},f=e=>{let{children:a,className:i,...s}=e;return(0,h.jsx)(d.$n,{size:"icon",variant:"ghost",className:(0,l.cn)("shrink-0 bg-accent-dark hover:bg-background hover:text-primary",i),...s,children:a})};var N=i(6210),g=i(614);const b=e=>{const{onCancel:a,value:i}=e,s=(0,c.useRef)(null),[r,t]=(0,l.Lp)(),[n,o]=(0,l.E2)(),[m,x]=(0,l.a2)(),[u,p]=(0,l.FG)(),v=(0,c.useCallback)((async()=>{const{mode:a,type:i,onSave:t,id:d,groupId:c}=e;if("reminder"===i){if("update"===a){if(!d)throw new Error("Update id is required");await(0,l.$F)((()=>m({id:d,title:s.current.value})))}"create"===a&&await(0,l.$F)((()=>r({title:s.current.value,groupId:c})))}if("reminderGroup"===i){if("update"===a){if(!d)throw new Error("Update id is required");await(0,l.$F)((()=>u({id:d,name:s.current.value})))}"create"===a&&await(0,l.$F)((()=>n({name:s.current.value})))}null===t||void 0===t||t()}),[r,n,m,u,e]),j=(0,c.useCallback)((()=>{null===a||void 0===a||a()}),[a]);return{ItemComponent:e=>{let{className:a}=e;return(0,h.jsxs)("div",{className:(0,l.cn)("my-2 flex items-center justify-between",a),children:[(0,h.jsx)(d.pd,{className:"ml-1 mr-2",defaultValue:i,ref:s,autoFocus:!0}),(0,h.jsxs)("div",{className:"flex items-center gap-1",children:[(0,h.jsx)(f,{onClick:v,children:(0,h.jsx)(N.A,{className:"icon"})}),(0,h.jsx)(f,{onClick:j,children:(0,h.jsx)(g.A,{className:"icon text-destructive"})})]})]})},result:"create"===e.mode?"reminder"===e.type?t:o:"reminder"===e.type?x:p}},y=e=>{let{reminder:a}=e;const[i,s]=(0,l.Qs)(),[r,t]=(0,c.useState)(!1),[n,o]=(0,c.useState)(!1),{ItemComponent:v,result:j}=b({type:"reminder",mode:"update",id:a.id,onCancel:()=>o(!1),onSave:()=>o(!1),value:a.title}),N=(0,c.useCallback)((async e=>{await(0,l.$F)((()=>i(e)))}),[i]),g=s.isLoading||j.isLoading;return(0,h.jsxs)("div",{className:"flex items-center justify-between gap-2 py-2","data-testid":"reminder-item-".concat(a.id),children:[n?(0,h.jsx)(v,{className:"flex-1"}):(0,h.jsx)(d.o5,{variant:"p",className:"overflow-x-scroll text-nowrap py-2",children:a.title}),!n&&(0,h.jsx)(d.rI,{data:[{id:"edit",component:()=>(0,h.jsx)(f,{"data-testid":"reminder-item-edit-".concat(a.id),onClick:()=>o(!0),children:(0,h.jsx)(m.A,{className:"icon"})})},{id:"delete",component:()=>(0,h.jsx)(f,{"data-testid":"reminder-item-delete-".concat(a.id),onClick:()=>N(a.id),className:"hover:text-destructive",children:(0,h.jsx)(x.A,{className:"icon"})})}],triggerer:e=>(0,h.jsx)(d.$n,{variant:"secondary",size:"icon","data-testid":"reminder-item-menu-".concat(a.id),disabled:g,...e,children:r?(0,h.jsx)(u.A,{className:"icon"}):(0,h.jsx)(p.A,{className:"icon"})}),isOpen:r,onToggle:t,itemRenderer:e=>e.component(),position:"bottom-right"})]})},w=()=>{const e=(0,l.S9)(),{currentData:a,refetch:i}=(0,l.z5)(e),{currentData:s}=(0,l.n)(e.groupId,{skip:!e.groupId}),[r,t]=(0,c.useState)(!1),{ItemComponent:n}=b({type:"reminder",mode:"create",onCancel:()=>t(!1),onSave:()=>t(!1),groupId:null===s||void 0===s?void 0:s.id});return(0,h.jsxs)("div",{className:"flex flex-1 flex-col overflow-hidden p-4",children:[(0,h.jsxs)("div",{className:"mb-2 flex items-center justify-between gap-2",children:[(0,h.jsx)(d.o5,{variant:"h4",className:"flex items-center justify-between overflow-x-scroll text-nowrap py-2 ","data-testid":"active-list-title",children:(null===s||void 0===s?void 0:s.name)||"All"}),(0,h.jsxs)("div",{className:"flex gap-2",children:[(0,h.jsx)(d.$n,{size:"icon",variant:"ghost",className:"hover:text-primary","data-testid":"refresh-reminder-list",children:(0,h.jsx)(o.A,{className:"icon",onClick:i})}),(0,h.jsx)(j,{size:"icon",onClick:()=>t((e=>!e)),disabled:r})]})]}),a&&(0,h.jsx)("div",{className:"flex-1 overflow-scroll",children:(0,h.jsx)("ul",{className:"divide divide-y",children:a.map((e=>(0,h.jsx)("li",{children:(0,h.jsx)(y,{reminder:e})},e.id)))})}),r&&(0,h.jsx)(n,{})]})},k=e=>{let{reminderGroup:a}=e;const[i,s]=(0,c.useState)(!1),[r,t]=(0,c.useState)(!1),n=(0,l.jL)(),[o,v]=(0,l.dP)(),{groupId:j}=(0,l.GV)(l.hk),N=j===(null===a||void 0===a?void 0:a.id),{ItemComponent:g,result:y}=b({type:"reminderGroup",mode:"update",...a?{id:a.id}:{},onCancel:()=>t(!1),onSave:()=>t(!1),value:null===a||void 0===a?void 0:a.name}),w=v.isLoading||y.isLoading,k=(0,l.cn)("py-2 flex items-center justify-between cursor-pointer gap-2"),C=(0,c.useCallback)((e=>{n((0,l.dR)(e))}),[n]),A=(0,c.useCallback)((async e=>{await(0,l.$F)((()=>o(e)))}),[o]),I=(0,c.useMemo)((()=>a&&r?(0,h.jsx)(g,{className:"flex-1"}):(0,h.jsx)(d.o5,{variant:"p",className:(0,l.cn)("overflow-x-scroll text-nowrap py-2",N&&"text-primary"),onClick:()=>C({groupId:a?a.id:void 0}),children:a?a.name:"All"})),[N,C,r,g,a]);return(0,h.jsxs)("div",{className:"".concat(k),"data-testid":"reminder-group-item-".concat(a?a.id:"all"),children:[I,a&&!r&&(0,h.jsx)(d.rI,{data:[{id:"edit",component:()=>(0,h.jsx)(f,{"data-testid":"reminder-group-item-edit-".concat(a.id),onClick:()=>t(!0),children:(0,h.jsx)(m.A,{className:"icon"})})},{id:"delete",component:()=>(0,h.jsx)(f,{"data-testid":"reminder-group-item-delete-".concat(a.id),onClick:()=>A(a.id),className:"hover:text-destructive",children:(0,h.jsx)(x.A,{className:"icon"})})}],triggerer:e=>(0,h.jsx)(d.$n,{variant:"secondary",size:"icon","data-testid":"reminder-group-item-menu-".concat(a.id),disabled:w,...e,children:i?(0,h.jsx)(u.A,{className:"icon"}):(0,h.jsx)(p.A,{className:"icon"})}),isOpen:i,onToggle:s,itemRenderer:e=>e.component(),position:"bottom-right"})]})},C=()=>{const{data:e}=(0,l.kI)(),[a,i]=(0,c.useState)(!1),{ItemComponent:s}=b({type:"reminderGroup",mode:"create",onCancel:()=>i(!1),onSave:()=>i(!1)});return(0,h.jsxs)("div",{className:"flex min-w-[200px] flex-1 flex-col overflow-hidden p-4",children:[(0,h.jsx)("div",{className:"mb-2 mt-1 flex justify-center",children:(0,h.jsx)(j,{size:"full",onClick:()=>i((e=>!e)),disabled:a,children:"Add List"})}),(0,h.jsx)("div",{className:"flex-1 overflow-scroll",children:(0,h.jsxs)("ul",{className:"divide divide-y divide-accent-dark",children:[(0,h.jsx)("li",{children:(0,h.jsx)(k,{})},"all"),e&&e.map((e=>(0,h.jsx)("li",{children:(0,h.jsx)(k,{reminderGroup:e})},e.id)))]})}),a&&(0,h.jsx)(s,{})]})},A=()=>{const{isBelowMd:e}=(0,n.d)("md");return(0,h.jsx)("div",{className:"mx-auto h-full max-w-screen-md p-2 md:p-8",children:(0,h.jsxs)("div",{className:"flex h-full flex-col rounded border-2 border-primary shadow-lg lg:h-3/4",children:[(0,h.jsx)("nav",{className:"flex h-[--navbar-height] border-b-2 border-primary",children:(0,h.jsx)("ul",{className:"flex flex-1 items-center justify-between px-4",children:(0,h.jsx)("li",{children:(0,h.jsx)(d.o5,{variant:"h2",className:"pb-0",children:"Reminders"})})})}),(0,h.jsxs)(s.YZ,{direction:e?"vertical":"horizontal",className:"flex-1",autoSaveId:"reminders-panel-group",children:[(0,h.jsx)(s.Zk,{maxSize:50,className:"flex flex-col",children:(0,h.jsx)(C,{})}),(0,h.jsx)(s.TW,{className:"group",children:(0,h.jsx)("div",{className:(0,l.cn)("flex h-full w-full items-center border-primary group-hover:bg-secondary group-hover:text-primary",e?"border-b-2":"border-r-2"),children:e?(0,h.jsx)(r.A,{className:"icon mx-auto"}):(0,h.jsx)(t.A,{className:"icon mx-auto"})})}),(0,h.jsx)(s.Zk,{className:"flex flex-col",children:(0,h.jsx)(w,{})})]})]})})}}}]);
//# sourceMappingURL=145.d0e92784.chunk.js.map