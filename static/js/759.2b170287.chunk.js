"use strict";(self.webpackChunktodo_app=self.webpackChunktodo_app||[]).push([[759],{4759:(e,a,s)=>{s.d(a,{Reminders:()=>S});var r=s(9458),i=s(5379),n=s(5686),l=s(5043);var t=s(9657),d=s(4349);var c=s(4743),o=s(8899),m=s(5711),u=s(2382),x=s(5505),h=s(4808);const p="COMPLETED";var v=s(1360),j=s(579);const g=e=>{let{children:a,className:s,...r}=e;return(0,j.jsxs)(c.$n,{variant:"ghost",className:(0,d.cn)("gap-1 border border-accent-dark hover:bg-accent-dark hover:text-primary",s),...r,children:[(0,j.jsx)(v.A,{className:"icon"}),a]})};var f=s(6210),N=s(614);const b=e=>{let{className:a,onCancel:s,onSave:r,defaultValue:i="",testIds:n}=e;const t=(0,l.useRef)(null),o=(0,l.useCallback)((()=>{var e;null!==(e=t.current)&&void 0!==e&&e.value&&(null===r||void 0===r||r(t.current.value))}),[r]),m=(0,l.useCallback)((()=>{null===s||void 0===s||s()}),[s]);return(0,j.jsxs)("div",{className:(0,d.cn)("mt-2 flex items-center justify-between",a),children:[(0,j.jsx)(c.pd,{className:"ml-1 mr-2",defaultValue:i,ref:t,autoFocus:!0,required:!0}),(0,j.jsxs)("div",{className:"flex items-center gap-1",children:[(0,j.jsx)(c.$n,{onClick:o,size:"icon",variant:"outline","data-testid":null===n||void 0===n?void 0:n.save,className:"group",children:(0,j.jsx)(f.A,{className:"icon group-hover:text-primary"})}),(0,j.jsx)(c.$n,{onClick:m,size:"icon",variant:"outline","data-testid":null===n||void 0===n?void 0:n.cancel,className:"group",children:(0,j.jsx)(N.A,{className:"icon group-hover:text-destructive"})})]})]})},k=e=>{let{reminder:a}=e;const[s,r]=(0,l.useState)(!1),[i,n]=(0,l.useState)(!1),{handleOnDelete:t,handleOnUpdate:o,isLoading:v}=(e=>{let{reminder:a}=e;const[s,r]=(0,d.Qs)(),[i,n]=(0,d.a2)();return{isLoading:r.isLoading||n.isLoading,isErrored:r.isError||n.isError,handleOnDelete:(0,l.useCallback)((async e=>{await(0,d.$F)((()=>s(e)))}),[s]),handleOnUpdate:(0,l.useCallback)((async e=>{await(0,d.$F)((()=>i({id:e.id,groupId:e.groupId,title:e.title,state:e.state})))}),[i])}})({reminder:a}),g=v;return(0,j.jsxs)("div",{className:"flex items-center justify-between gap-2  py-2","data-testid":"reminder-item-".concat(a.id),children:[i?(0,j.jsx)(b,{className:"flex-1",defaultValue:a.title,onCancel:()=>n(!1),onSave:e=>{o({id:a.id,title:e}),n(!1)},testIds:{cancel:"reminder-item-update-cancel-".concat(a.id),save:"reminder-item-update-save-".concat(a.id)}}):(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(c.Sc,{checked:a.state===p,className:"peer"}),(0,j.jsx)(c.o5,{variant:"p",affects:"withoutPMargin",className:(0,d.cn)("flex-1 overflow-x-scroll text-nowrap py-2 peer-aria-[checked=true]:line-through"),children:a.title})]}),!i&&(0,j.jsxs)(c.rI,{open:s,onOpenChange:r,children:[(0,j.jsx)(c.ty,{asChild:!0,children:(0,j.jsx)(c.$n,{variant:"outline",size:"icon","data-testid":"reminder-item-menu-".concat(a.id),disabled:g,children:s?(0,j.jsx)(m.A,{className:"icon"}):(0,j.jsx)(u.A,{className:"icon"})})}),(0,j.jsxs)(c.SQ,{className:"min-w-min",align:"end",onInteractOutside:()=>r(!1),children:[(0,j.jsx)(c._2,{"data-testid":"reminder-item-edit-".concat(a.id),onClick:()=>n(!0),className:"group",children:(0,j.jsx)(x.A,{size:20,className:"group-hover:text-primary"})}),(0,j.jsx)(c.mB,{}),(0,j.jsx)(c._2,{"data-testid":"reminder-item-delete-".concat(a.id),onClick:()=>t(a.id),className:"group",children:(0,j.jsx)(h.A,{size:20,className:"group-hover:text-destructive"})})]})]})]})},w=()=>{const{reminders:e,refetchReminders:a,reminderGroup:s,handleOnSave:r}=(()=>{const e=(0,d.S9)(),{currentData:a,refetch:s}=(0,d.z5)(e),{currentData:r}=(0,d.n)(e.groupId,{skip:!e.groupId}),[i,n]=(0,d.Lp)(),t=n.isLoading,c=n.isError;return{reminders:a,reminderGroup:r,refetchReminders:s,handleOnSave:(0,l.useCallback)((async e=>{await(0,d.$F)((()=>i({groupId:e.groupId,title:e.title})))}),[i]),isLoading:t,isErrored:c}})(),[i,n]=(0,l.useState)(!1);return(0,j.jsxs)("div",{className:"flex flex-1 flex-col overflow-hidden p-4",children:[(0,j.jsxs)("div",{className:"mb-2 flex items-center justify-between gap-2",children:[(0,j.jsx)(c.o5,{variant:"h4",className:"flex items-center justify-between overflow-x-scroll text-nowrap py-2 ","data-testid":"reminder-list-title",children:(null===s||void 0===s?void 0:s.name)||"All"}),(0,j.jsxs)("div",{className:"flex gap-2",children:[(0,j.jsx)(c.$n,{size:"icon",variant:"ghost",className:"hover:text-primary","data-testid":"reminder-list-refetch",children:(0,j.jsx)(o.A,{className:"icon",onClick:a})}),(0,j.jsx)(g,{size:"icon",onClick:()=>n((e=>!e)),disabled:i})]})]}),e&&(0,j.jsx)("div",{className:"flex-1 overflow-scroll",children:(0,j.jsx)("ul",{className:"divide divide-y",children:e.map((e=>(0,j.jsx)("li",{children:(0,j.jsx)(k,{reminder:e})},e.id)))})}),i&&(0,j.jsx)(b,{onCancel:()=>n(!1),onSave:e=>{r({title:e,groupId:null===s||void 0===s?void 0:s.id}),n(!1)},testIds:{cancel:"reminder-item-create-cancel",save:"reminder-item-create-save"}})]})},y=e=>{let{reminderGroup:a}=e;const[s,r]=(0,l.useState)(!1),[i,n]=(0,l.useState)(!1),{handleOnDelete:t,handleOnItemClick:o,handleOnSave:p,isLoading:v,isSelected:g}=(e=>{let{reminderGroup:a}=e;const{groupId:s}=(0,d.GV)(d.hk),r=s===(null===a||void 0===a?void 0:a.id),[i,n]=(0,d.dP)(),[t,c]=(0,d.FG)(),o=(0,d.jL)();return{isSelected:r,isLoading:n.isLoading||c.isLoading,isErrored:n.isError||c.isError,handleOnItemClick:(0,l.useCallback)((e=>{o((0,d.dR)(e))}),[o]),handleOnDelete:(0,l.useCallback)((async e=>{await(0,d.$F)((()=>i(e)))}),[i]),handleOnSave:(0,l.useCallback)((async e=>{await(0,d.$F)((()=>t({id:e.id,name:e.name})))}),[t])}})({reminderGroup:a}),f=v,N=(0,l.useMemo)((()=>a&&i?(0,j.jsx)(b,{className:"flex-1",defaultValue:a.name,onCancel:()=>n(!1),onSave:e=>{p({id:a.id,name:e}),n(!1)},testIds:{cancel:"reminder-group-item-update-cancel-".concat(a.id),save:"reminder-group-item-update-save-".concat(a.id)}}):(0,j.jsx)(c.o5,{variant:"p",className:(0,d.cn)("overflow-x-scroll text-nowrap py-2",g&&"text-primary"),onClick:()=>o({groupId:a?a.id:void 0}),children:a?a.name:"All"})),[g,o,i,a,p]);return(0,j.jsxs)("div",{className:(0,d.cn)("flex cursor-pointer items-center justify-between gap-2 px-1 py-2"),"data-testid":"reminder-group-item-".concat(a?a.id:"all"),children:[N,a&&!i&&(0,j.jsxs)(c.rI,{open:s,onOpenChange:r,children:[(0,j.jsx)(c.ty,{asChild:!0,children:(0,j.jsx)(c.$n,{variant:"outline",size:"icon","data-testid":"reminder-group-item-menu-".concat(a.id),disabled:f,children:s?(0,j.jsx)(m.A,{className:"icon"}):(0,j.jsx)(u.A,{className:"icon"})})}),(0,j.jsxs)(c.SQ,{align:"end",onInteractOutside:()=>r(!1),className:"min-w-min",children:[(0,j.jsx)(c._2,{onClick:()=>n(!0),"data-testid":"reminder-group-item-update-".concat(a.id),className:"group",children:(0,j.jsx)(x.A,{size:20,className:"group-hover:text-primary"})}),(0,j.jsx)(c.mB,{}),(0,j.jsx)(c._2,{onClick:()=>t(a.id),"data-testid":"reminder-group-item-delete-".concat(a.id),className:"group",children:(0,j.jsx)(h.A,{size:20,className:"group-hover:text-destructive"})})]})]})]})},C=()=>{const[e,a]=(0,l.useState)(!1),{handleOnSave:s,reminderGroups:r}=(()=>{const{data:e}=(0,d.kI)(),[a,s]=(0,d.E2)(),r=s.isLoading,i=s.isError;return{reminderGroups:e,handleOnSave:(0,l.useCallback)((async e=>{await(0,d.$F)((()=>a({name:e.name})))}),[a]),isLoading:r,isErrored:i}})();return(0,j.jsxs)("div",{className:"flex min-w-[200px] flex-1 flex-col overflow-hidden p-4",children:[(0,j.jsx)("div",{className:"mb-2 mt-1 flex justify-center",children:(0,j.jsx)(g,{size:"full",onClick:()=>a((e=>!e)),disabled:e,children:"Add List"})}),(0,j.jsx)("div",{className:"flex-1 overflow-scroll",children:(0,j.jsxs)("ul",{className:"divide divide-y divide-accent-dark",children:[(0,j.jsx)("li",{children:(0,j.jsx)(y,{})},"all"),r&&r.map((e=>(0,j.jsx)("li",{children:(0,j.jsx)(y,{reminderGroup:e})},e.id)))]})}),e&&(0,j.jsx)(b,{onCancel:()=>a(!1),onSave:e=>{s({name:e}),a(!1)},testIds:{cancel:"reminder-group-item-create-cancel",save:"reminder-group-item-create-save"}})]})},S=()=>{const{isBelowMd:e}=function(e){const a=d.LO[e],s=(0,t.Ub)({query:"(max-width: ".concat(a,")")}),r=e[0].toUpperCase()+e.substring(1);return{[e]:Number(String(a).replace(/[^0-9]/g,"")),["isAbove".concat(r)]:!s,["isBelow".concat(r)]:s}}("md");return(0,j.jsx)("div",{className:"mx-auto h-full max-w-screen-md p-2 md:p-8",children:(0,j.jsxs)("div",{className:"flex h-full flex-col rounded border-2 border-primary shadow-lg lg:h-3/4",children:[(0,j.jsx)("nav",{className:"flex h-[--navbar-height] border-b-2 border-primary",children:(0,j.jsx)("ul",{className:"flex flex-1 items-center justify-between px-4",children:(0,j.jsx)("li",{children:(0,j.jsx)(c.o5,{variant:"h2",className:"pb-0",children:"Reminders"})})})}),(0,j.jsxs)(r.YZ,{direction:e?"vertical":"horizontal",className:"flex-1",autoSaveId:"reminders-panel-group",children:[(0,j.jsx)(r.Zk,{maxSize:50,className:"flex flex-col",children:(0,j.jsx)(C,{})}),(0,j.jsx)(r.TW,{className:"group",children:(0,j.jsx)("div",{className:(0,d.cn)("flex h-full w-full items-center border-primary group-hover:bg-secondary group-hover:text-primary",e?"border-b-2":"border-r-2"),children:e?(0,j.jsx)(i.A,{className:"icon mx-auto"}):(0,j.jsx)(n.A,{className:"icon mx-auto"})})}),(0,j.jsx)(r.Zk,{className:"flex flex-col",children:(0,j.jsx)(w,{})})]})]})})}}}]);
//# sourceMappingURL=759.2b170287.chunk.js.map