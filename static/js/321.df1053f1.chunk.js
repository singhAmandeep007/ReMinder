"use strict";(self.webpackChunkreminder_app=self.webpackChunkreminder_app||[]).push([[321],{7321:(e,r,t)=>{t.d(r,{runServer:()=>w});var n=t(3806),i=t(3527),s=t(4349),d=t(9700);const a=(0,i.factory)({reminder:{id:(0,i.primaryKey)(s.uR),title:()=>"Reminder ".concat((0,s.uR)({simple:!0})),isPinned:()=>!1,state:()=>d.x.INACTIVE,group:(0,i.oneOf)("reminderGroup"),createdAt:()=>(new Date).toISOString(),updatedAt:()=>(new Date).toISOString(),dueDate:(0,i.nullable)(String)},reminderGroup:{id:(0,i.primaryKey)(s.uR),name:()=>"Reminder Group ".concat((0,s.uR)({simple:!0})),createdAt:()=>(new Date).toISOString(),updatedAt:()=>(new Date).toISOString()}});var o=t(8814),u=t(153);const c=e=>{let{db:r}=e;return[o.L.get((0,s.Iw)("/reminders"),(e=>{let{request:t}=e;const n=r.reminder.getAll(),i=(0,s.wm)(t.url);let d=n;return i.groupId&&(d=d.filter((e=>{var r;return(null===e||void 0===e||null===(r=e.group)||void 0===r?void 0:r.id)===i.groupId}))),i.state&&(d=d.filter((e=>e.state===i.state))),u.c.json({data:d},{status:200})})),o.L.post((0,s.Iw)("/reminders"),(async e=>{let{request:t}=e;const{title:n,groupId:i}=await t.json(),s=r.reminderGroup.getAll().find((e=>e.id===i));if(i&&!s)return u.c.json({message:"Reminder Group with id ".concat(i," not found!")},{status:404});const d=r.reminder.create({title:n,group:s});return u.c.json({data:d},{status:201})})),o.L.delete((0,s.Iw)("/reminders/:id"),(e=>{let{params:t}=e;return r.reminder.findFirst({where:{id:{equals:t.id}}})?(r.reminder.delete({where:{id:{equals:t.id}}}),u.c.json({message:"Reminder with id ".concat(t.id," deleted!")},{status:200})):u.c.json({message:"Reminder with id ".concat(t.id," not found!")},{status:404})})),o.L.patch((0,s.Iw)("/reminders/:id"),(async e=>{let{request:t,params:n}=e;const{groupId:i,...s}=await t.json();if(!r.reminder.findFirst({where:{id:{equals:n.id}}}))return u.c.json({message:"Reminder with id ".concat(n.id," not found!")},{status:404});const d=r.reminderGroup.findFirst({where:{id:{equals:i}}});if(i&&!d)return u.c.json({message:"Reminder Group with id ".concat(i," not found!")},{status:404});const a=r.reminder.update({where:{id:{equals:n.id}},data:{...s}});return u.c.json({data:a},{status:200})}))]},m=e=>{let{db:r}=e;return[o.L.get((0,s.Iw)("/reminder-groups"),(()=>u.c.json({data:r.reminderGroup.getAll()},{status:200}))),o.L.get((0,s.Iw)("/reminder-groups/:id"),(e=>{let{params:t}=e;const n=r.reminderGroup.findFirst({where:{id:{equals:t.id}}});return n?u.c.json({data:n},{status:200}):u.c.json({message:"Reminder Group with id ".concat(t.id," not found!")},{status:404})})),o.L.post((0,s.Iw)("/reminder-groups"),(async e=>{let{request:t}=e;const n=await t.json(),i=r.reminderGroup.create({...n});return u.c.json({data:i},{status:201})})),o.L.delete((0,s.Iw)("/reminder-groups/:id"),(e=>{let{params:t}=e;return r.reminderGroup.findFirst({where:{id:{equals:t.id}}})?(r.reminderGroup.delete({where:{id:{equals:t.id}}}),u.c.json({message:"Reminder Group with id ".concat(t.id," deleted!")},{status:200})):u.c.json({message:"Reminder Group with id ".concat(t.id," not found!")},{status:404})})),o.L.patch((0,s.Iw)("/reminder-groups/:id"),(async e=>{let{request:t,params:n}=e;const i=await t.json();if(!r.reminderGroup.findFirst({where:{id:{equals:n.id}}}))return u.c.json({message:"Reminder Group with id ".concat(n.id," not found!")},{status:404});const s=r.reminderGroup.update({where:{id:{equals:n.id}},data:{...i}});return u.c.json({data:s},{status:200})}))]},p=[...m(l={db:a}),...c(l)];var l;const w=async e=>(null!==e&&void 0!==e&&e.withDefaultScenario&&g(a).withReminders(5).withReminderGroups({reminderGroups:["Work","Home","Personal"],remindersPerGroup:2}),await(async()=>{const e=(0,n.k)(...p);return await e.start({onUnhandledRequest:"bypass",serviceWorker:{url:"".concat("https://singhamandeep.me/reminder-app/","mockServiceWorker.js")}})})()),g=e=>{const r={withReminders:function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10;for(let r=0;r<t;r++)e.reminder.create();return r},withReminderGroups:t=>{let{reminderGroups:n=["Work","Home","Personal"],remindersPerGroup:i=10}=t;return n.forEach((r=>{const t=e.reminderGroup.create({name:r});for(let n=0;n<i;n++)e.reminder.create({group:t})})),r}};return r}},9700:(e,r,t)=>{t.d(r,{x:()=>n});const n={INACTIVE:"INACTIVE",INPROGRESS:"INPROGRESS",COMPLETED:"COMPLETED",ARCHIVED:"ARCHIVED"}}}]);
//# sourceMappingURL=321.df1053f1.chunk.js.map